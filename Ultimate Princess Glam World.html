<!DOCTYPE html>
<html>
<head>
<title>Ultimate Princess Glam World</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: Arial;
  background: linear-gradient(135deg,#ffd6ff,#caffbf,#a0c4ff);
  transition: background 2s;
}

#game {
  width: 100vw;
  height: 100vh;
  position: relative;
  overflow: hidden;
}

#player {
  position: absolute;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 70px;
}

#pet {
  position: absolute;
  bottom: 100px;
  left: 40%;
  font-size: 40px;
}

.item {
  position: absolute;
  font-size: 40px;
}

#hud {
  position: absolute;
  top: 10px;
  left: 10px;
  font-size: 22px;
}

#wardrobe {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 28px;
}

#gameover {
  position: absolute;
  top: 40%;
  width: 100%;
  text-align: center;
  font-size: 40px;
  display: none;
}

.rainbow {
  animation: glow 1s infinite alternate;
}

@keyframes glow {
  0% { text-shadow:0 0 10px pink; }
  100% { text-shadow:0 0 20px yellow; }
}
</style>
</head>

<body>

<div id="game">
  <div id="hud">
    ğŸ’– Score: <span id="score">0</span><br>
    âœ¨ Combo: <span id="combo">0</span><br>
    ğŸŒŸ Level: <span id="level">1</span>
  </div>

  <div id="wardrobe">
    ğŸ‘‘ ğŸ‘¸ ğŸ’ƒ ğŸ§šâ€â™€ï¸ ğŸ¦„
  </div>

  <div id="player">ğŸ‘‘</div>
  <div id="pet">ğŸ±</div>
  <div id="gameover">ğŸ’” Glam Fail! ğŸ’”<br>Press R to Restart</div>
</div>

<script>
const game = document.getElementById("game");
const player = document.getElementById("player");
const pet = document.getElementById("pet");
const scoreText = document.getElementById("score");
const comboText = document.getElementById("combo");
const levelText = document.getElementById("level");
const gameOverText = document.getElementById("gameover");

let playerX = window.innerWidth/2;
let petX = window.innerWidth/3;
let score = 0;
let combo = 0;
let level = 1;
let fallSpeed = 6;
let gameRunning = true;

const outfits = ["ğŸ‘‘","ğŸ‘¸","ğŸ’ƒ","ğŸ§šâ€â™€ï¸","ğŸ¦„"];
const goodItems = ["ğŸ’„","ğŸ’","ğŸ‘—","ğŸ‘ ","ğŸ‘œ"];
const rareItems = ["ğŸŒŸ","âœ¨"];
const badItems = ["ğŸ’”","ğŸ•·ï¸","ğŸ—‘ï¸"];

/* Movement */
let moveLeft=false;
let moveRight=false;
let speed=18;

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft") moveLeft=true;
  if(e.key==="ArrowRight") moveRight=true;
  if(!gameRunning && e.key==="r") location.reload();
});

document.addEventListener("keyup",e=>{
  if(e.key==="ArrowLeft") moveLeft=false;
  if(e.key==="ArrowRight") moveRight=false;
});

function move(){
  if(moveLeft) playerX-=speed;
  if(moveRight) playerX+=speed;

  if(playerX<0) playerX=0;
  if(playerX>window.innerWidth-60) playerX=window.innerWidth-60;

  player.style.left=playerX+"px";

  // Pet follows player slightly
  petX += (playerX - petX)*0.05;
  pet.style.left = petX+"px";

  requestAnimationFrame(move);
}
move();

/* Wardrobe click */
document.getElementById("wardrobe").addEventListener("click",e=>{
  if(outfits.includes(e.target.innerText)){
    player.innerText=e.target.innerText;
  }
});

/* Spawn items */
function spawnItem(){
  if(!gameRunning) return;

  let item=document.createElement("div");
  item.className="item";

  let rand=Math.random();
  let emoji;
  let value=1;
  let isBad=false;

  if(rand<0.1){
    emoji=rareItems[Math.floor(Math.random()*rareItems.length)];
    value=5;
  } else if(rand<0.2){
    emoji=badItems[Math.floor(Math.random()*badItems.length)];
    isBad=true;
  } else {
    emoji=goodItems[Math.floor(Math.random()*goodItems.length)];
  }

  item.innerText=emoji;
  item.style.left=Math.random()*(window.innerWidth-50)+"px";
  item.style.top="-50px";
  game.appendChild(item);

  let fall=setInterval(()=>{
    item.style.top=item.offsetTop+fallSpeed+"px";

    if(hit(item,player) || hit(item,pet)){
      if(isBad){
        endGame();
      } else {
        combo++;
        score+=value*combo;
        scoreText.innerText=score;
        comboText.innerText=combo;

        if(combo>=5) player.classList.add("rainbow");

        if(combo%5===0){
          player.innerText=outfits[Math.floor(Math.random()*outfits.length)];
        }
      }
      item.remove();
      clearInterval(fall);
    }

    if(item.offsetTop>window.innerHeight){
      combo=0;
      comboText.innerText=0;
      player.classList.remove("rainbow");
      item.remove();
      clearInterval(fall);
    }

  },20);
}

function hit(a,b){
  let r1=a.getBoundingClientRect();
  let r2=b.getBoundingClientRect();
  return(
    r1.left<r2.right &&
    r1.right>r2.left &&
    r1.top<r2.bottom &&
    r1.bottom>r2.top
  );
}

function endGame(){
  gameRunning=false;
  gameOverText.style.display="block";
}

/* Level system */
setInterval(()=>{
  level++;
  fallSpeed+=1;
  levelText.innerText=level;

  // Change background
  if(level%2===0){
    document.body.style.background="linear-gradient(135deg,#ff9a9e,#fad0c4)";
  } else {
    document.body.style.background="linear-gradient(135deg,#a18cd1,#fbc2eb)";
  }

  // Boss level
  if(level===5){
    alert("ğŸ‘‘ Fashion Queen Boss Appears! Survive!");
  }

},15000);

setInterval(spawnItem,600);
</script>
</body>
</html>
