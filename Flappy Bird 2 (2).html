<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Sky Bird Adventure</title>
<style>
body{
  margin:0;
  overflow:hidden;
  background:linear-gradient(#4facfe,#c2e9fb);
  font-family:Arial;
}
canvas{display:block;}
#ui{
  position:absolute;
  top:10px;left:10px;
  color:white;font-size:18px;
}
#shop{
  position:absolute;
  bottom:15px;left:15px;
  background:rgba(0,0,0,.55);
  padding:12px;border-radius:14px;
  color:white;
}
#shop.disabled{opacity:.4;pointer-events:none;}
button{margin:4px;padding:6px 10px;cursor:pointer;}
</style>
</head>
<body>

<div id="ui">
‚ù§Ô∏è <span id="lives">3</span> |
ü™ô <span id="coins">0</span> |
üèÜ <span id="high">0</span>
</div>

<div id="shop">
<b>Shop</b><br>
<button onclick="buyLife()">‚ù§Ô∏è Life (10)</button>
<button onclick="buySpeed()">‚ö° Speed (15)</button>
<button onclick="buyShield()">üõ°Ô∏è Shield (20)</button>
</div>

<canvas id="game"></canvas>

<script>
/* CANVAS */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

/* STATE */
let lives = 3, coins = 0;
let speedBoost = false, invincible = false;
let gameOver = false;
let damageCooldown = false;

/* SCORES */
let highScore = localStorage.getItem("skyBirdHigh") || 0;
let lastCoins = localStorage.getItem("skyBirdLastCoins") || 0;
document.getElementById("high").textContent = highScore;

/* BIRD */
const bird = { x:150, y:canvas.height/2, vy:0 };

/* OBJECTS */
let windmills = [], coinsArr = [], enemies = [];

/* INPUT */
addEventListener("keydown", e=>{
  if(!gameOver && (e.code==="Space"||e.code==="ArrowUp")){
    bird.vy = -8;
  }
});

/* SPAWNERS */
setInterval(()=>!gameOver && windmills.push({
  x:canvas.width+100,
  y:Math.random()*(canvas.height-200)+100,
  a:0
}),2000);

setInterval(()=>!gameOver && coinsArr.push({
  x:canvas.width+100,
  y:Math.random()*(canvas.height-100)+50
}),1200);

setInterval(()=>!gameOver && enemies.push({
  x:canvas.width+100,
  y:Math.random()*(canvas.height-100)+50,
  vy:Math.random()*2-1
}),2600);

/* VOICE */
function speakGameOver(){
  speechSynthesis.speak(new SpeechSynthesisUtterance("Game Over"));
}

/* DRAW MAIN BIRD */
function drawBird(){
  ctx.save();
  ctx.translate(bird.x,bird.y);

  let g = ctx.createRadialGradient(-5,-5,5,0,0,30);
  g.addColorStop(0,"#fff3a0");
  g.addColorStop(1,"#f5c400");
  ctx.fillStyle = g;

  ctx.beginPath();
  ctx.ellipse(0,0,25,18,0,0,Math.PI*2);
  ctx.fill();

  ctx.fillStyle="#e6b800";
  ctx.beginPath();
  ctx.moveTo(-5,0);
  ctx.quadraticCurveTo(-30,-10,-15,15);
  ctx.fill();

  ctx.fillStyle="white";
  ctx.beginPath();
  ctx.arc(8,-5,4,0,Math.PI*2);
  ctx.fill();
  ctx.fillStyle="black";
  ctx.beginPath();
  ctx.arc(9,-5,2,0,Math.PI*2);
  ctx.fill();

  ctx.fillStyle="orange";
  ctx.beginPath();
  ctx.moveTo(25,0);
  ctx.lineTo(35,5);
  ctx.lineTo(25,10);
  ctx.fill();

  ctx.restore();
}

/* WINDMILL */
function drawWindmill(w){
  ctx.save();
  ctx.translate(w.x,w.y);
  ctx.strokeStyle="#aaa";
  ctx.lineWidth=5;
  ctx.beginPath();
  ctx.moveTo(0,-60);
  ctx.lineTo(0,60);
  ctx.stroke();
  ctx.rotate(w.a);
  for(let i=0;i<3;i++){
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.lineTo(60,0);
    ctx.stroke();
    ctx.rotate(Math.PI*2/3);
  }
  ctx.restore();
}

/* ENEMY BIRD */
function drawEnemy(e){
  ctx.save();
  ctx.translate(e.x,e.y);
  ctx.fillStyle="#222";
  ctx.beginPath();
  ctx.ellipse(0,0,20,14,0,0,Math.PI*2);
  ctx.fill();
  ctx.fillStyle="white";
  ctx.beginPath();
  ctx.arc(6,-4,3,0,Math.PI*2);
  ctx.fill();
  ctx.fillStyle="black";
  ctx.beginPath();
  ctx.arc(7,-4,1.5,0,Math.PI*2);
  ctx.fill();
  ctx.restore();
}

/* GAME OVER SCREEN */
function drawGameOver(){
  ctx.fillStyle="rgba(0,0,0,.7)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="white";
  ctx.textAlign="center";
  ctx.font="64px Arial";
  ctx.fillText("GAME OVER",canvas.width/2,canvas.height/2-80);
  ctx.font="26px Arial";
  ctx.fillText("Coins: "+lastCoins,canvas.width/2,canvas.height/2-20);
  ctx.fillText("High Score: "+highScore,canvas.width/2,canvas.height/2+20);
  ctx.font="22px Arial";
  ctx.fillText("Press CTRL + R to Restart",canvas.width/2,canvas.height/2+80);
}

/* HIT WITH COOLDOWN */
function hit(){
  if(invincible || gameOver || damageCooldown) return;

  lives--;
  document.getElementById("lives").textContent = lives;

  damageCooldown = true;
  setTimeout(()=>damageCooldown=false,1000);

  if(lives<=0){
    gameOver=true;
    document.getElementById("shop").classList.add("disabled");

    lastCoins = coins;
    localStorage.setItem("skyBirdLastCoins", lastCoins);

    if(coins>highScore){
      highScore = coins;
      localStorage.setItem("skyBirdHigh", highScore);
      document.getElementById("high").textContent = highScore;
    }

    speakGameOver();
  }
}

/* LOOP */
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(gameOver){
    drawGameOver();
    return;
  }

  bird.vy += 0.5;
  bird.y += bird.vy;
  bird.y = Math.max(20, Math.min(canvas.height-20, bird.y));
  drawBird();

  windmills.forEach(w=>{
    w.x -= 3;
    w.a += 0.08;
    drawWindmill(w);
    if(Math.hypot(bird.x-w.x,bird.y-w.y)<50) hit();
  });

  enemies.forEach(e=>{
    e.x -= 4;
    e.y += e.vy;
    drawEnemy(e);
    if(Math.hypot(bird.x-e.x,bird.y-e.y)<40) hit();
  });

  coinsArr.forEach(c=>{
    c.x -= 3;
    ctx.fillStyle="gold";
    ctx.beginPath();
    ctx.arc(c.x,c.y,8,0,Math.PI*2);
    ctx.fill();
    if(Math.hypot(bird.x-c.x,bird.y-c.y)<25){
      coins++;
      document.getElementById("coins").textContent = coins;
      c.x = -100;
    }
  });

  windmills = windmills.filter(w=>w.x>-100);
  enemies = enemies.filter(e=>e.x>-100);
  coinsArr = coinsArr.filter(c=>c.x>-100);

  requestAnimationFrame(loop);
}

/* SHOP */
function buyLife(){if(coins>=10&&!gameOver){coins-=10;lives++;updateUI();}}
function buySpeed(){if(coins>=15&&!gameOver){coins-=15;speedBoost=true;setTimeout(()=>speedBoost=false,5000);updateUI();}}
function buyShield(){if(coins>=20&&!gameOver){coins-=20;invincible=true;setTimeout(()=>invincible=false,5000);updateUI();}}
function updateUI(){
  document.getElementById("coins").textContent = coins;
  document.getElementById("lives").textContent = lives;
}

/* START */
loop();
</script>
</body>
</html>
