<!DOCTYPE html>
<html>
<head>
<title>Black Hole Evolution</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: radial-gradient(circle at center, #000 0%, #020617 80%);
}
canvas {
  display: block;
}
</style>
</head>

<body>
<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let mouse = { x: canvas.width / 2, y: canvas.height / 2 };
let objects = [];
let size = 20;
let score = 0;
let gameRunning = true;

canvas.addEventListener("mousemove", e => {
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

document.addEventListener("keydown", e => {
  if (!gameRunning && e.key === "r") location.reload();
});

function spawnObject() {
  let type = Math.random();
  let objSize;

  if (type < 0.6) objSize = 5 + Math.random() * 10; // dust
  else if (type < 0.9) objSize = 15 + Math.random() * 15; // asteroid
  else objSize = 30 + Math.random() * 30; // star

  objects.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    size: objSize
  });
}

function update() {
  if (!gameRunning) return;

  objects.forEach((o, i) => {
    let dx = mouse.x - o.x;
    let dy = mouse.y - o.y;
    let dist = Math.sqrt(dx * dx + dy * dy);

    if (dist < size) {
      if (o.size <= size) {
        size += o.size * 0.05;
        score++;
        objects.splice(i, 1);
      } else {
        gameRunning = false;
      }
    }
  });
}

function draw() {
  ctx.fillStyle = "#020617";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // glow effect
  ctx.beginPath();
  ctx.arc(mouse.x, mouse.y, size + 20, 0, Math.PI * 2);
  ctx.strokeStyle = "rgba(59,130,246,0.2)";
  ctx.lineWidth = 4;
  ctx.stroke();

  // black hole
  ctx.beginPath();
  ctx.arc(mouse.x, mouse.y, size, 0, Math.PI * 2);
  ctx.fillStyle = "black";
  ctx.fill();

  // objects
  objects.forEach(o => {
    ctx.beginPath();
    ctx.arc(o.x, o.y, o.size, 0, Math.PI * 2);
    ctx.fillStyle = o.size < 15 ? "#94a3b8" :
                    o.size < 30 ? "#f97316" :
                    "#facc15";
    ctx.fill();
  });

  // score
  ctx.fillStyle = "white";
  ctx.font = "18px Arial";
  ctx.fillText("Mass: " + Math.floor(size), 20, 30);

  if (!gameRunning) {
    ctx.font = "40px Arial";
    ctx.textAlign = "center";
    ctx.fillText("ðŸ’¥ COLLAPSED ðŸ’¥", canvas.width / 2, canvas.height / 2);
    ctx.font = "20px Arial";
    ctx.fillText("Press R to Restart", canvas.width / 2, canvas.height / 2 + 40);
  }
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

setInterval(spawnObject, 700);
loop();
</script>
</body>
</html>
